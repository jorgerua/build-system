# =============================================================================
# OCI Build System - Environment Variables Configuration
# =============================================================================
# This file documents all environment variables used by the OCI Build System.
# Copy this file to .env and update the values for your environment.
#
# Usage:
#   cp .env.example .env
#   # Edit .env with your actual values
#   docker-compose up -d
# =============================================================================

# =============================================================================
# GitHub Configuration
# =============================================================================

# GitHub Webhook Secret (REQUIRED)
# Secret used to validate webhook signatures from GitHub.
# This must match the secret configured in your GitHub webhook settings.
# Generate a secure random string for production use.
# Example: openssl rand -hex 32
GITHUB_WEBHOOK_SECRET=your-webhook-secret-here

# =============================================================================
# API Authentication
# =============================================================================

# API Authentication Token (REQUIRED)
# Token used to authenticate API requests.
# Generate a secure random token for production use.
# Example: openssl rand -base64 32
API_AUTH_TOKEN=your-api-token-here

# =============================================================================
# NATS Configuration
# =============================================================================

# NATS Server URL
# URL for connecting to the NATS message broker.
# Default: nats://nats:4222 (for Docker Compose)
# For local development: nats://localhost:4222
NATS_URL=nats://nats:4222

# =============================================================================
# Server Configuration
# =============================================================================

# Server Port
# Port on which the API service will listen.
# Default: 8080
SERVER_PORT=8080

# Server Read Timeout (seconds)
# Maximum duration for reading the entire request, including the body.
# Default: 30
SERVER_READ_TIMEOUT=30

# Server Write Timeout (seconds)
# Maximum duration before timing out writes of the response.
# Default: 30
SERVER_WRITE_TIMEOUT=30

# Server Shutdown Timeout (seconds)
# Maximum duration to wait for graceful shutdown.
# Default: 10
SERVER_SHUTDOWN_TIMEOUT=10

# =============================================================================
# Worker Configuration
# =============================================================================

# Worker Pool Size
# Number of concurrent workers processing build jobs.
# Adjust based on available CPU cores and memory.
# Default: 5
WORKER_POOL_SIZE=5

# Worker Timeout (seconds)
# Maximum time allowed for a single build job to complete.
# Default: 3600 (1 hour)
WORKER_TIMEOUT=3600

# Worker Max Retries
# Maximum number of retry attempts for failed build jobs.
# Default: 3
WORKER_MAX_RETRIES=3

# =============================================================================
# Build Configuration
# =============================================================================

# Build Code Cache Path
# Directory path for caching cloned repositories.
# Must be writable by the application.
# Default: /var/cache/oci-build/repos
BUILD_CODE_CACHE_PATH=/var/cache/oci-build/repos

# Build Dependencies Cache Path
# Directory path for caching build dependencies (Maven, Gradle, NuGet, Go modules).
# Must be writable by the application.
# Default: /var/cache/oci-build/deps
BUILD_BUILD_CACHE_PATH=/var/cache/oci-build/deps

# =============================================================================
# Language-Specific Cache Paths
# =============================================================================
# These paths are used by the worker service to cache dependencies for
# different programming languages, improving build performance.

# Maven Cache Path (Java)
# Default: /var/cache/oci-build/deps/maven
MAVEN_CACHE=/var/cache/oci-build/deps/maven

# Gradle Cache Path (Java/Kotlin)
# Default: /var/cache/oci-build/deps/gradle
GRADLE_CACHE=/var/cache/oci-build/deps/gradle

# NuGet Cache Path (.NET)
# Default: /var/cache/oci-build/deps/nuget
NUGET_CACHE=/var/cache/oci-build/deps/nuget

# Go Build Cache
# Default: /var/cache/oci-build/deps/go
GOCACHE=/var/cache/oci-build/deps/go

# Go Modules Cache
# Default: /var/cache/oci-build/deps/go/mod
GOMODCACHE=/var/cache/oci-build/deps/go/mod

# =============================================================================
# Logging Configuration
# =============================================================================

# Log Level
# Logging verbosity level.
# Options: debug, info, warn, error, fatal
# Default: info
# Use 'debug' for development, 'info' or 'warn' for production
LOG_LEVEL=info

# Log Format
# Format for log output.
# Options: json, console
# Default: json
# Use 'json' for production (structured logging), 'console' for development
LOG_FORMAT=json

# =============================================================================
# Development/Testing Configuration
# =============================================================================
# These variables are useful for local development and testing.

# Enable Debug Mode (optional)
# Set to 'true' to enable additional debug features.
# Default: false
# DEBUG=false

# Disable TLS Verification (optional, NOT for production)
# Set to 'true' to disable TLS certificate verification.
# WARNING: Only use for local development with self-signed certificates.
# Default: false
# INSECURE_SKIP_VERIFY=false

# =============================================================================
# Docker Registry Configuration (optional)
# =============================================================================
# Configure these if you need to push built images to a container registry.

# Docker Registry URL (optional)
# URL of the container registry to push images to.
# Example: registry.example.com
# DOCKER_REGISTRY_URL=

# Docker Registry Username (optional)
# Username for authenticating with the container registry.
# DOCKER_REGISTRY_USERNAME=

# Docker Registry Password (optional)
# Password or token for authenticating with the container registry.
# DOCKER_REGISTRY_PASSWORD=

# =============================================================================
# Notes
# =============================================================================
# 1. Never commit the .env file to version control - it contains secrets!
# 2. Ensure .env is listed in .gitignore
# 3. For production, use a secrets management system (e.g., Vault, AWS Secrets Manager)
# 4. All paths must be absolute and writable by the application user
# 5. Timeouts are in seconds unless otherwise specified
# 6. Generate strong random values for secrets using: openssl rand -hex 32
# =============================================================================
